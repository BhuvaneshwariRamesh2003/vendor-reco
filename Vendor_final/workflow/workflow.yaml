apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: vendor-reco-train-pipeline   # Executable ID for training
  annotations:
    scenarios.ai.sap.com/name: "vendor-recommendation"
    scenarios.ai.sap.com/description: "Train the vendor recommendation model using Random Forest"
    executables.ai.sap.com/name: "Vendor Reco (RF Model)"
    executables.ai.sap.com/description: "Train model for vendor recommendation"
    ext.ai.sap.com/islm_executable_type: "train"   # ✅ Marks this as a training executable
    ext.ai.sap.com/islm_released_version: "true"
  labels:
    scenarios.ai.sap.com/id: "vendor-recommendation"
    ai.sap.com/version: "2.0"
spec:
  imagePullSecrets:
    - name: bhuni   # Remove this line if your image is public
  entrypoint: mypipeline
  templates:
    - name: mypipeline
      steps:
        - - name: train-model
            template: vendor-reco-train-step

    - name: vendor-reco-train-step
      container:
        image: docker.io/bhuni/vendor-final-app:latest   # Your training image
        command: ["python"]
        args:
          - /app/src/train.py    # ✅ Use a dedicated training script instead of app.py
