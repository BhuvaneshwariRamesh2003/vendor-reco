apiVersion: argoproj.io/v1alpha1
kind: WorkflowTemplate
metadata:
  name: vendor-serving-pipeline  # <--- This must match executable_id in config.create()
  annotations:
    scenarios.ai.sap.com/description: "Vendor Recommendation Serving Pipeline"
    scenarios.ai.sap.com/name: "vendor-recommendation"
    executables.ai.sap.com/description: "Serve model for vendor recommendation"
    executables.ai.sap.com/name: "Vendor Reco Serving"
  labels:
    scenarios.ai.sap.com/id: "vendor-recommendation"
    ai.sap.com/version: "2.0"
spec:
  imagePullSecrets:
    - name: bhuni
  entrypoint: servepipeline
  templates:
    - name: servepipeline
      steps:
        - - name: serve-model
            template: vendor-reco-serve

    - name: vendor-reco-serve
      container:
        image: docker.io/bhuni/vendor-final-app:latest
        command: ["/bin/sh", "-c"]
        args:
          - "python /app/src/app.py"
        ports:
          - containerPort: 8080
